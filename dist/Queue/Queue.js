var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function u(t){try{a(n.next(t))}catch(t){r(t)}}function s(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(u,s)}a((n=n.apply(t,e||[])).next())})};export class Queue{constructor(t){this.freeAt=null;const{timeout:e}=t;this.timeout=e}await(){return __awaiter(this,void 0,void 0,function*(){const t=Date.now();if(null===this.freeAt||this.freeAt<t)return void(this.freeAt=t+this.timeout);const e=this.freeAt-t;return this.freeAt+=this.timeout,new Promise(t=>setTimeout(t,e))})}}